(()=>{"use strict";const e=class{constructor({urlGet:e,btnClass:t,parentClass:n,blockName:o,wrapper:s,outputKeys:a}){this.urlGet=e,this.btnClass=t,this.parentClass=n,this.blockName=o,this.wrapper=s,this.outputKeys=a}checkContentParent(e,t,n){const o=document.querySelector(`.${e}`).querySelectorAll(`.${t}__${n}`);o&&o.forEach((e=>{e.remove()}))}createDomElement(e,t,n){const o=document.querySelector(`.${e}`),s=document.createElement(t);return n.forEach((e=>{s.classList.add(e)})),o.append(s),s}cardGenerator(e,t,n,o,s){return this.createDomElement(t,"div",[`${n}__${o}`,`${o}`]),e.forEach((e=>{const t=this.createDomElement(`${n}__${o}`,"ul",["card"]);s.forEach((n=>{const o=document.createElement("li");o.textContent=e[n],t.append(o)}))})),e}init(){document.querySelector(`.${this.btnClass}`).addEventListener("click",(e=>{e.preventDefault(),this.checkContentParent(this.parentClass,this.blockName,this.wrapper),fetch(this.urlGet).then((e=>e.json())).then((e=>this.cardGenerator(e,this.parentClass,this.blockName,this.wrapper,this.outputKeys))).then((e=>console.log(e))).catch((e=>console.log(e))).finally((()=>console.log("fetch get end")))}))}},t=function(e){const t=document.querySelector(e),n=t.querySelectorAll("input"),o=[];n.forEach((e=>{o.push(e.placeholder)})),t.addEventListener("click",(s=>{if(s.preventDefault(),"BUTTON"===s.target.tagName&&function(e){let t=!0;return e.forEach((e=>{""===e.value&&(e.classList.add("js-warning"),e.placeholder="form is not fill!!!",t=!1)})),t}(n)){const s=new FormData(t),a={};s.forEach(((e,t)=>{a[t]=e})),fetch("/api/post/",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)}).then((e=>e.json())).then((e=>console.log(e))).then((()=>{n.forEach(((e,t)=>{e.classList.remove("js-warning"),e.placeholder=o[t]}))})).then((()=>function(e){const t=document.querySelector(e),n=document.querySelectorAll(`${e} *`),o=document.createElement("p");o.textContent="Данные переданы на сервер",t.append(o),n.forEach((e=>{e.classList.add("js-hide")})),setTimeout((()=>{o.remove(),n.forEach((e=>{e.classList.remove("js-hide"),t.reset()}))}),1e3)}(e))).catch((e=>console.log(e))).finally((()=>console.log("fetch post end")))}}))};document.addEventListener("DOMContentLoaded",(()=>{new e({urlGet:"/api/data/",btnClass:"data__link",parentClass:"data__container",blockName:"data",wrapper:"wrapper",outputKeys:["name","phone"]}).init(),new e({urlGet:"/api/posts/",btnClass:"posts__link",parentClass:"posts__container",blockName:"posts",wrapper:"wrapper",outputKeys:["id","name","message"]}).init(),t(".form-post")}))})();
//# sourceMappingURL=bundle.js.map